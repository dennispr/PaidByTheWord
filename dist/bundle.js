/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t={},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,o,r,a){var c=o&&o.prototype instanceof u?o:u,l=Object.create(c.prototype);return i(l,"_invoke",function(n,o,r){var i,a,c,u=0,l=r||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,c=e,f.n=n,s}};function p(n,o){for(a=n,c=o,t=0;!d&&u&&!r&&t<l.length;t++){var r,i=l[t],p=f.p,v=i[2];n>3?(r=v===o)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((r=n<2&&p<i[1])?(a=0,f.v=o,f.n=i[1]):p<v&&(r=n<3||i[0]>o||o>v)&&(i[4]=n,i[5]=o,f.n=v,a=0))}if(r||n>1)return s;throw d=!0,o}return function(r,l,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(t=a<2?e:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(u=2,i){if(a||(r="next"),t=i[r]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=e}else if((t=(d=f.n<0)?c:n.call(o,f))!==s)break}catch(t){i=e,a=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,r,a),!0),l}var s={};function u(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),p=d.prototype=u.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,i(p,"constructor",d),i(d,"constructor",l),l.displayName="GeneratorFunction",i(d,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,o,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function i(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}i=function(e,t,n,o){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,o)}function a(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}o.m=t,o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,n)=>(o.f[n](e,t),t),[])),o.u=e=>e+".bundle.js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},o.l=(t,n,r,i)=>{if(e[t])e[t].push(n);else{var a,c;if(void 0!==r)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var l=s[u];if(l.getAttribute("src")==t){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=t),e[t]=[n];var d=(n,o)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(e=>e(o)),n)return n(o)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={792:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=i);var a=o.p+o.u(t),c=new Error;o.l(a,n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,r[1](c)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,c,s]=n,u=0;if(a.some(t=>0!==e[t])){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);s&&s(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=10,s=75,u=[],l=null,d={},f=new Set,p=[],v=0,g=1,m=null;function h(){var e;return e=r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!m){e.n=1;break}return e.a(2,m);case 1:return e.p=1,e.n=2,o.e(343).then(o.bind(o,343));case 2:return t=e.v,m=t,e.a(2,m);case 3:return e.p=3,n=e.v,console.warn("Confetti load failed",n),e.a(2,null)}},e,null,[[1,3]])}),h=function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function c(e){a(i,o,r,c,s,"next",e)}function s(e){a(i,o,r,c,s,"throw",e)}c(void 0)})},h.apply(this,arguments)}var b=function(e){return document.querySelector(e)},y=function(e){return String(e).replace(/["'&<>]/g,function(e){return{'"':"&quot;","'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;"}[e]})};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=b("#bank"),n=t.dataset.score?+t.dataset.score:v-e,o=function(e){return"You've made $".concat((e-s).toFixed(2),"<br><br>[$").concat(e.toFixed(2)," - $").concat(s," (Rent)]")};if(e>0){var r=n;t.classList.add("flash-green");var i=function(){r<v?(r++,t.innerHTML=o(r),setTimeout(i,10)):(t.innerHTML=o(v),setTimeout(function(){return t.classList.remove("flash-green")},500))};i(),function(){return h.apply(this,arguments)}().then(function(t){if(t&&"function"==typeof t.burst){var n=document.querySelector(".clue.book-title-responsive"),o=Math.round(window.innerWidth/2),r=160;if(n){var i=n.getBoundingClientRect();o=Math.round(i.left+i.width/2+window.scrollX),r=Math.max(60,Math.round(i.top+window.scrollY-.25*i.height))}t.burst({x:o,y:r,count:Math.min(40,10+Math.round(e/5)),emoji:"ðŸ’µ",duration:1200})}})}else t.innerHTML=o(v);t.dataset.score=v}function k(){!function(){if(u.length){console.log("DATA:",u),l=u[Math.floor(Math.random()*u.length)],console.log("Chosen book:",l);var e=l.WORD_COUNTS||l.WORD_COUNTS_RAW||{};for(var t in console.log("rawCounts keys:",Object.keys(e)),d={},e)Object.hasOwn(e,t)&&(d[t.toUpperCase()]=e[t]);console.log("wordCounts keys:",Object.keys(d)),f=new Set,p=[],v=0;var n=Object.values(d).sort(function(e,t){return t-e});g=(n[0]||0)+(n[1]||0)+(n[2]||0)||1}else console.warn("No books loaded.")}();var e=document.getElementById("currentBookTitle");e&&l&&l.title&&(e.textContent=l.title);var t=document.getElementById("guessCounter");t&&(t.textContent="Guesses left: ".concat(c));var n=document.getElementById("bank");n&&(n.textContent="$".concat(0,"-").concat(s," = $").concat((-75).toFixed(2)),n.dataset.score=0),w(),C()}function x(e){if(l&&!(p.length>=c)){var t=e.trim().toUpperCase();console.log("Guess:",t,"wordCounts[g]:",d[t],"guessedWords:",f);var n=0,o=!1;!f.has(t)&&d[t]&&(o=!0,f.add(t),n=Math.round(d[t]/g*100*100)/100,v+=n),p.push({text:e,correct:o,inc:n}),w(n),C();var r=document.getElementById("guessCounter");r&&(r.textContent="Guesses left: ".concat(c-p.length)),p.length===c&&setTimeout(function(){return function(){b("#guess").disabled=!0,b("#submitGuess").disabled=!0;var e="function"==typeof showEndModal?showEndModal:"undefined"!=typeof window&&"function"==typeof window.showEndModal?window.showEndModal:null;if(e)e(v,s);else{var t=v>=75?"Good job! You scored $".concat(v,"-").concat(s," = $").concat((v-s).toFixed(2),"."):"Try again! You scored $".concat(v,"-").concat(s," = $").concat((v-s).toFixed(2),".");b("#revealText").textContent=t,b("#reveal").hidden=!1}}()},500)}}function C(){var e="";if(l&&(e=p.slice().reverse().map(function(e){var t=e.text.trim().toUpperCase(),n=d[t]||0,o=e.correct?' <span class="used-count">(used '.concat(n," times)</span>"):"",r="";return e.correct&&(r=e.inc>=20?"guess-green":e.inc>=10?"guess-orange":"guess-red"),'<div class="attempt"><div class="guess pill '.concat(r,'"><span class="status ').concat(e.correct?"ok":"bad",'">').concat(e.correct?"+$"+e.inc:"0","</span> ").concat(y(e.text)).concat(o,"</div></div>")}).join(""),!document.getElementById("guess-pill-style"))){var t=document.createElement("style");t.id="guess-pill-style",t.textContent="\n    .guess.pill { display: inline-flex; align-items: center; gap: 8px; min-width: 96px; padding: 6px 10px; border-radius: 8px; white-space: nowrap; }\n    .guess-green { background: #2ecc40 !important; color: #fff !important; }\n    .guess-orange { background: #ff9800 !important; color: #fff !important; }\n    .guess-red { background: #e53935 !important; color: #fff !important; }\n    .used-count { font-size: 0.9em; color: rgba(255,255,255,0.7); margin-left: 0.5em; }\n    ",document.head.appendChild(t)}b("#attempts").innerHTML=e;var n=document.getElementById("currentBookTitle");if(n&&l&&l.title?n.innerHTML='<span class="clue book-title-responsive">Book: <b>'.concat(y(l.title),"</b></span>"):n&&(n.textContent=""),!document.getElementById("book-title-style")){var o=document.createElement("style");o.id="book-title-style",o.textContent="\n    .book-title-responsive {\n        display: inline-block;\n        max-width: 90vw;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 2.5vw;\n        font-weight: bold;\n        vertical-align: middle;\n    }\n    @media (max-width: 600px) {\n        .book-title-responsive { font-size: 4vw; }\n    }\n    ",document.head.appendChild(o)}b("#guess").disabled=!l||p.length>=c,b("#submitGuess").disabled=!l||p.length>=c,b("#guess").value="",l&&p.length<c&&b("#guess").focus();var r=document.getElementById("guessCounter");r&&(r.textContent="Words left: ".concat(c-p.length))}b("#submitGuess").addEventListener("click",function(){var e=b("#guess").value.trim();e&&x(e)}),b("#guess").addEventListener("keydown",function(e){if("Enter"===e.key){var t=b("#guess").value.trim();t&&x(t)}});var T=document.getElementById("newGame");T&&T.addEventListener("click",function(){k(),b("#reveal").hidden=!0}),window.BookByWord={setData:function(e){u=e.map(function(e){return{title:e.title,author:e.author,WORD_COUNTS:e.WORD_COUNTS||{},WORD_COUNTS_RAW:e.WORD_COUNTS_RAW||{}}}),k()}}})();
//# sourceMappingURL=bundle.js.map